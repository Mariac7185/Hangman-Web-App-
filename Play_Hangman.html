<!DOCTYPE html>

<html>

<head>
	<meta charset="utf-8">
	<title>Play Hangman</title>
	<link type="text/css" rel="stylesheet" href="stylesheet.css"/>
</head>


<body>

<img id="pic" src="./hangmanImages/Image1.gif" alt = "current game state"/>

<br>

<select id="menu" onchange="getCategory(this.value);">
	<option value="select">Select Category</option>
	<option value="states">U.S. State</option>
	<option value="countries">Country</option>
	<option value="animal">Animal</option>
	<option value="occupation">Occupation/Job</option>
	<option value="appliance">Household Appliance</option>
	<option value="furniture">Furniture</option>
	<option value="fruit">Fruit</option>
	<option value="transport">Transportation</option>
	<option value="music">Musical Instrument</option>
	<option value="mlbTeams">MLB Teams</option>
	<option value="nbaTeams">NBA Teams</option>
	<option value="nhlTeams">NHL Teams</option>
	<option value="nflTeams">NFL Teams</option>
</select>

<br><br>

<input id="userInput" type="text" maxlength="1" value ="" autofocus="autofocus" name="input"></input>


<div id="wordlines">

</div>

<script type="text/javascript">
	
	window.onload=function(){
		 //document.getElementById("userInput").onchange=setAutoFocus();
		// var category = e.options[e.selectedIndex].text;

		// alert(category);
	//setAutoFocus()
	}


	var imageArray = ['./hangmanImages/Image1.gif','./hangmanImages/Image2.gif','./hangmanImages/Image3.gif','./hangmanImages/Image4.gif','./hangmanImages/Image5.gif','./hangmanImages/Image6.gif','./hangmanImages/Image7.gif','./hangmanImages/Image8.gif'];

	var index = 0;

	var wordArray;
	var word;

//	document.write("<img src=\"" + imageArray[index] + "\" alt=\"hangmanImage\"/>");


	
	
	// document.write(word1.categoryIndex);
	//Calls autofocus after each menu change
	function getCategory(category){
		loadFile(category);
		setAutoFocus()
		// alert(category);
	}

    /*This function loads the file of the category selected, line by line.
      It calls the makeArray function which the converts the javascript object (text from the file) into a string
    */
	function loadFile(category){
		var file = "file:///C:/Users/Avi/Desktop/Dropbox/HANGMAN (WEB)/".concat(category).concat(".txt");
		var lines;
		//alert(file);
		var rawFile =  new XMLHttpRequest();
		rawFile.open("GET", category.concat(".txt"),false);
		rawFile.onreadystatechange = function (){
			if(rawFile.readyState === 4){							//document is ready to parse 																  
				if(rawFile.status === 200 || rawFile.status ===0){    //file is found 
					var allText = rawFile.responseText;
					var lines  = rawFile.responseText.split("\n");    //Reading the file line by line. Adding a comma after each line
					makeArray(lines);				
				}
			}
		}
		rawFile.send(null);

	}

	/*This function receives the data read in from the file as an object
	  It then converts that object to a string
	  It then splits the string (after each comma) and places it into an array
	 */
	function makeArray(fileData){
		var str = String(fileData)	
		wordArray= str.split(",");
		getWord();
		printBlankSpaces();
	}

	/*getWord() determines the size of the category based on the length of the array of words which were read in.
	  It then selects a random number from 0 to that number. This number is then used as the index of the array to 
	  determine the word to be selected.
	 */
	function getWord(){
		var categorySize = wordArray.length;
		word = wordArray[Math.floor((Math.random() * categorySize))];
		//alert(word);
	}

	/*printBlankSpaces finds the length of the word selected and outputs that blank '_' black lines 
	  to the screen. 
	 */
	function printBlankSpaces(){

		var wordLength = word.length;
		var blankLines="";
		var div ="";

		for(var x = 0; x < wordLength; x++){
			blankLines += "   _   ";
		}

		div = document.getElementById("wordlines");
		div.innerHTML = blankLines;

	}

	/*This function sets the focus of the textbox*/
	function setAutoFocus(){
		document.getElementById("userInput").focus();
	}



</script>




</body>

</html>